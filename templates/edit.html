<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">

<head>
    <link rel="icon" href="timg.png" type="image/x-icon" />
    <style type="text/css">
        #menu-item {
            font-size: 18px;
            font-weight: bolder
        }

        body {
            background-color: rgb(238, 238, 238);
            margin: 0 0 0 0;
        }

        .user-info {
            font-size: 2px;
            float: right;
            font-weight: lighter;
        }
    </style>

    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">

    <title>index</title>
</head>

<body>
    <div id="app">

        <div id="content" style="margin-bottom: 10px">
            <el-menu :default-active="activeIndex" mode="horizontal" @select="handleSelect" background-color="#155B88"
                text-color="#fff" active-text-color="#FF7E00" style="margin: 0 0 0 0">
                <el-row type="flex" justify="center">
                    <el-menu-item index="/" id="menu-item">Browser</el-menu-item>
                    <el-menu-item index="#" style="float: right" id="menu-item">Upload Center</el-menu-item>
                    <el-menu-item index="#" style="float: right" id="menu-item">Search</el-menu-item>
                    <el-menu-item index="#" class="user-info">Welcome，</el-menu-item>
                    <el-menu-item index="#" style="float: right" id="menu-item">Login</el-menu-item>
                    </el-menu-item>
                </el-row>
            </el-menu>
        </div>
    </div>
    <div id="main" style="margin-bottom: 40px">
        <h3 v-show="fileType == 'pdf'">正在查看：{{ .path }}</h3>
        <h3 v-show="fileType == 'text'">正在编辑：{{ .path }}</h3>
        <iframe title="" width="100%" height="800px" frameborder="no" src="{{ .src }}" v-show="fileType == 'pdf'">
        </iframe>
        <iframe width="100%" height="800px" frameborder="no" src="/ace?src={{ .src }}" v-show="fileType == 'text'">
        </iframe>
    </div>

</body>
<script src=" https://cdn.jsdelivr.net/npm/vue/dist/vue.js"> </script>
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.0"></script>

<script>

    var app = new Vue({

        delimiters: ['[[ ', ' ]]'],
        el: '#app',
        data: {
            activeIndex: '/'
        },
        methods: {

            handleSelect: function (key, keyPath) {
                if (key === '/' || key === '#') {
                    this.activeIndex = '/';
                    window.location.href = '/'
                }
            }
        },
        created: function () {
        }
    })
    var main = new Vue({
        el: '#main',
        delimiters: ['[[ ', ' ]]'],
        data: {
            activeIndex: 'm/movieIndex',
            paths: [],
            fileType: "{{.type }}"
        },
        methods: {
            getPaths: function (p) {
                _t = this
                axios
                    .get('/files?p=' + p)
                    .then(function (response) {
                        _t.paths = response.data.f
                    })
                    .catch(function (error) {
                        console.log(error);
                    });

            },
        },
        created: function () {
            this.getPaths("")
            console.log(this.fileType)

        }
    })
</script>

</html>